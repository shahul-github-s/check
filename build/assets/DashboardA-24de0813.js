import{r as i,j as e}from"./mui-109ef935.js";import{A as M}from"./AppBar-ad562978.js";import{A as O}from"./AppGrid-194ad766.js";import{S as L}from"./StatisticsCard-8b66b467.js";import{S as N}from"./Spring-680b1b2f.js";import{S as R}from"./index-a995cfdb.js";import{u as C,a as W}from"./index-0cd16d31.js";import{n as F,g as G,c as T}from"./helpers-fc71785b.js";import{P}from"./options-4eeaed21.js";import{s as u}from"./sales_chart-4d46dcbe.js";import{R as I,A as K,C as _,X as V,Y as J,T as B,a as U,P as H,b as z,c as Y}from"./recharts-001aae89.js";import{B as D}from"./BasicTable-d4cc91d1.js";import{T as q}from"./TopSellingCollapse-f2aa5f96.js";import{T as Z}from"./columnDefs-e7e5386e.js";import{a as S,O as Q,F as $,b as X}from"./OrdersTable-ab0b6216.js";import{P as y}from"./Pagination-23a850f4.js";import{S as k}from"./Search-b9941f4e.js";import ee from"./SignIn-572414a2.js";import"./Helmet-3cc0a097.js";import"./ResizeObserver.es-f4289e8a.js";import"./browser-d3ee35eb.js";import"./Counter-4ac5da64.js";import"./index-26993953.js";import"./toConsumableArray-b3f31dad.js";import"./objectWithoutProperties-ee9c3b50.js";import"./createSuper-c06aae95.js";import"./memoize-one.esm-297ddbcb.js";import"./Table-0fd4c431.js";import"./toArray-dacdad19.js";import"./TopSellingProductItem-141d107c.js";import"./StarRating-4bee9901.js";import"./GoogleButton-4031b297.js";import"./PasswordInput-d91768cf.js";import"./index.esm-1b78be58.js";const te=()=>{const[s,r]=i.useState({todayRevenue:{value:"",trend:""},todayVisitors:{value:"",trend:""},todayProfit:{value:"",trend:""},totalExpenses:{value:"",trend:""}}),d=async()=>{try{const m=await(await fetch("https://script.google.com/macros/s/AKfycbzInxrNGat-E-JnpAD7GJ-ZJC7xh2pr3fbuW9UQZWci9i8aH8McHKPk7GWPM3jd_1ntWA/exec")).json();r(m)}catch(p){console.error("Error fetching Google Sheets data:",p)}};i.useEffect(()=>{d();const p=setInterval(()=>{d()},100);return()=>clearInterval(p)},[]);const l=[{title:"Today Sales",iconClass:"wallet-solid",value:s.todayRevenue.value,valuePrefix:"₹",trend:s.todayRevenue.trend},{title:"Today Visitors",iconClass:"user-plus-solid",value:s.todayVisitors.value,valuePrefix:"",trend:s.todayVisitors.trend},{title:"Today Profit",iconClass:"arrow-down-to-line-solid",value:s.todayProfit.value,valuePrefix:"₹",trend:s.todayProfit.trend},{title:"Total Expenses",iconClass:"bag-shopping-solid",value:s.totalExpenses.value,valuePrefix:"₹",trend:s.totalExpenses.trend}];return e.jsx("div",{className:"grid grid-cols-1 h-full gap-6 md:grid-cols-2 xl:gap-8 3xl:grid-cols-4",children:l.map((p,m)=>e.jsx(L,{data:p,chartClass:"xl:w-[250px] 3xl:hidden min-[1800px]:block min-[1800px]:w-[110px] 5xl:w-[130px]"},m))})},ae=({active:s,payload:r,label:d})=>s?e.jsxs("div",{className:"bg-peach p-2.5 rounded-md dark:shadow-md",children:[e.jsx("p",{className:"text-[18px] font-semibold !text-white mb-1",children:d}),e.jsxs("p",{className:"text-[15px] font-semibold text-white",children:["Sales: ₹",r[0].value]})]}):null,re={week:[{name:"Mon",b:0},{name:"Tues",b:0},{name:"Wednes",b:0},{name:"Thurs",b:0},{name:"Fri",b:0},{name:"Satur",b:0},{name:"Sun",b:0}],month:[{name:"01-05",b:0},{name:"06-10",b:0},{name:"11-15",b:0},{name:"16-20",b:0},{name:"21-25",b:0},{name:"26-31",b:0}],year:[{name:"Jan-Mar",b:0},{name:"Apr-Jun",b:0},{name:"Jul-Sep",b:0},{name:"Oct-Dec",b:0}]},E=async()=>{try{const r=await(await fetch("https://script.google.com/macros/s/AKfycbwEg7PSNzrZmd8AVxl-_pGrijyazyhbDVJ29wEI3IibLcqZg9bySaTuVtUxaghkERtnZw/exec")).json();u.week.data=r.week,u.month.data=r.month,u.year.data=r.year}catch(s){console.error("Error fetching sales data:",s)}},se=()=>{const{width:s}=C(),{theme:r}=W(),[d,l]=i.useState(P[0]),[p,m]=i.useState([]),x=G("salesAnalytics",50,"x");if(i.useEffect(()=>{E();const o=setInterval(()=>{E(),m(u[d.value].data)},100);return()=>clearInterval(o)},[d]),i.useEffect(()=>{m(u[d.value].data)},[d]),!p||p.length===0){const o=re;u.week.data=o.week,u.month.data=o.month,u.year.data=o.year}return e.jsxs(N,{className:"card flex flex-col gap-[22px] h-[392px] xs:h-[315px] p-5 xs:p-6 md:h-full",children:[e.jsxs("div",{className:"flex flex-col gap-2.5 xs:flex-row xs:items-center xs:justify-between xs:gap-5",children:[e.jsx("h2",{children:"Sales Analytics"}),e.jsx("div",{className:"min-w-[105px]",children:e.jsx(R,{value:d,variant:"minimal",onChange:l,options:P})})]}),e.jsx("div",{className:"flex-1 overflow-hidden -mr-2 md:-ml-11 md:-mr-4",children:e.jsx(I,{width:"99%",height:"100%",id:"salesAnalytics",children:e.jsxs(K,{data:p,margin:{top:0,right:7,left:7,bottom:0},children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"salesAnalyticsFill",x1:"-124.434",y1:"-94.766",x2:"-124.434",y2:"227.785",gradientUnits:"userSpaceOnUse",children:[e.jsx("stop",{stopColor:"var(--peach)"}),e.jsx("stop",{offset:"1",stopColor:r==="light"?"white":"transparent",stopOpacity:"0.01"})]})}),e.jsx(_,{vertical:!1,horizontalPoints:x,strokeWidth:1,stroke:"var(--cartesian-grid)",strokeDasharray:"8 8"}),e.jsx(V,{dataKey:"name",dy:10,axisLine:!1,tickLine:!1,hide:s<768}),e.jsx(J,{tickCount:7,tickFormatter:o=>F(o,0),axisLine:!1,tickLine:!1,hide:s<768}),e.jsx(B,{cursor:{strokeDasharray:"8 8",stroke:"var(--peach)"},content:e.jsx(ae,{})}),e.jsx(U,{type:"monotone",dataKey:"b",stroke:"var(--peach)",strokeWidth:3,strokeLinecap:"round",fill:"url(#salesAnalyticsFill)"})]})})})]})},oe=[{name:"General Service",data:{week:{profit:0,products:0},month:{profit:0,products:0},year:{profit:0,products:0}},color:"turquoise",darkAura:"#1B3838",lightAura:"#F4FFFF"},{name:"E-Sevai",data:{week:{profit:0,products:0},month:{profit:0,products:0},year:{profit:0,products:0}},color:"blue",darkAura:"#14344A",lightAura:"#F1F7FF"},{name:"Job Application Support",data:{week:{profit:0,products:0},month:{profit:0,products:0},year:{profit:0,products:0}},color:"yellow",darkAura:"#3B300A",lightAura:"#FFFBF0"},{name:"Travel Services",data:{week:{profit:0,products:0},month:{profit:0,products:0},year:{profit:0,products:0}},color:"peach",darkAura:"#3B300A",lightAura:"#FFFBF0"}],ie=()=>{const{width:s}=C(),[r,d]=i.useState(P[0]),[l,p]=i.useState(oe),m=async()=>{try{const c=await(await fetch("https://script.google.com/macros/s/AKfycbw4h3m4YxuFvbg0eD9A0oTM1mtvGbVsQdsGw_erIG9ZB66V_wnK9Chmz8eiuaXzTOvJvw/exec")).json();p([{name:"General Service",data:c.generalService,color:"turquoise",darkAura:"#1B3838",lightAura:"#F4FFFF"},{name:"E-Sevai",data:c.eSevai,color:"blue",darkAura:"#14344A",lightAura:"#F1F7FF"},{name:"Job Application Support",data:c.jobApplicationSupport,color:"yellow",darkAura:"#3B300A",lightAura:"#FFFBF0"},{name:"Travel Services",data:c.travelServices,color:"peach",darkAura:"#3B300A",lightAura:"#FFFBF0"}])}catch(a){console.error("Error fetching data: ",a)}};i.useEffect(()=>{m();const a=setInterval(()=>{m()},1e3);return()=>clearInterval(a)},[]);const x=()=>l.reduce((a,c)=>a+c.data[r.value].profit,0),o=({active:a,payload:c})=>a&&c&&c.length?e.jsx("div",{className:"basic-tooltip",children:F(c[0].value,0,"₹")}):null,n=({item:a,period:c})=>{const A=l.reduce((h,v)=>h+v.data[c].products,0),g=a.data[c].products/A*100;return e.jsxs("div",{className:"flex gap-2.5",children:[e.jsx("span",{className:"flex items-center justify-center w-[15px] h-[15px] rounded-full mt-1 shrink-0",style:{backgroundColor:a.lightAura},children:e.jsx("span",{className:`w-[7px] h-[7px] rounded-full bg-${a.color}`})}),e.jsxs("div",{className:"flex flex-col flex-1 gap-1",children:[e.jsxs("p",{className:"flex justify-between font-medium text-[15px] text-header",children:[a.name," (",g.toFixed(2),"%)",e.jsxs("span",{children:["₹",T(a.data[c].profit)]})]}),e.jsxs("p",{className:"uppercase text-xs text-label",children:[T(a.data[c].products)," Lead Count"]})]})]})};return e.jsxs(N,{className:"card flex flex-col gap-4 p-5 h-full xs:p-6",children:[e.jsxs("div",{className:"flex flex-col gap-2.5 xs:flex-row xs:items-center xs:justify-between",children:[e.jsx("h2",{children:"Sales By Category"}),e.jsx("div",{className:"min-w-[105px]",children:e.jsx(R,{options:P,value:r,onChange:d})})]}),e.jsxs("div",{className:"flex flex-col items-start gap-6 flex-1 md:flex-row md:items-center md:gap-[65px]",children:[e.jsxs("div",{className:`relative overflow-hidden min-h-[240px] min-w-[240px] xs:min-w-[294px]
                     xs:min-h-[294px] m-auto md:m-0 md:w-[294px] md:h-[294px]`,children:[e.jsx(I,{width:"99%",height:"99%",children:e.jsxs(H,{children:[e.jsx(z,{data:l,dataKey:`data.${r.value}.profit`,nameKey:"name",cx:"50%",cy:"50%",outerRadius:s<414?118:140,innerRadius:95,strokeWidth:0,fill:"#8884d8",children:l.map((a,c)=>e.jsx(Y,{fill:`var(--${a.color})`},c))}),e.jsx(B,{cursor:!1,content:e.jsx(o,{})})]})}),e.jsx("span",{className:"counter absolute-center",children:F(x(),0,"₹")})]}),e.jsx("div",{className:"flex flex-col flex-1 w-full gap-4",children:l.map((a,c)=>e.jsx(n,{item:a,period:r.value},c))})]})]})},ne=async()=>{try{return await(await fetch("https://script.google.com/macros/s/AKfycbwad1aZtWO7iN4iyR8bTnu9RjZW_j66P1tKuK8wvDs9dcgJLHdAPjFDjvI9CNYrvi9svA/exec")).json()}catch(s){return console.error("Error fetching top selling data:",s),[]}},ce=()=>{const{width:s}=C(),[r,d]=i.useState(""),[l,p]=i.useState(null),[m,x]=i.useState(!0);return i.useEffect(()=>{(async()=>{const a=await ne();a&&(p(a),x(!1))})();const n=setInterval(()=>{l&&(x(!1),clearInterval(n))},5e3);return()=>clearInterval(n)},[l]),i.useEffect(()=>{const o=()=>{d("")};return window.addEventListener("resize",o),()=>{window.removeEventListener("resize",o)}},[]),m?e.jsx("div",{children:"Loading..."}):e.jsxs(N,{className:"card flex flex-col gap-4 p-5 xs:p-6 h-full",children:[e.jsx("h2",{children:"Transaction Details"}),s<768?e.jsx("div",{className:"flex flex-col gap-4",children:l.map((o,n)=>e.jsx(q,{product:o,active:r,setActive:d,index:n},n))}):e.jsx(D,{dataSource:l,columns:Z,scroll:{y:230},rowKey:"id",showSorterTooltip:!1,pagination:!1})]})},le="/assets/trending-92669c5f.webp",de=()=>e.jsx(N,{className:"card relative h-[392px] p-6 overflow-hidden md:h-full",children:e.jsx("img",{className:"absolute top-0 left-0 h-full",src:le,alt:"Single Breasted Blazer"})}),pe=()=>{const{width:s}=C(),[r,d]=i.useState([]),[l,p]=i.useState({currentPage:0,itemsPerPage:10}),[m,x]=i.useState("");i.useEffect(()=>{S.get("https://script.google.com/macros/s/AKfycbwA_ogqmdudCsJm-D4e87v7m9U8gHwnq2L1No7L2knbgE088oWl-1gFhycqf51nqxFNog/exec").then(t=>{d(t.data)}).catch(t=>console.error("Error fetching data:",t))},[]);const{currentPage:o,itemsPerPage:n}=l,a=r.length,c=Math.ceil(a/n),g=r.filter(t=>t["Service Unit Report "].toLowerCase().includes(m.toLowerCase())).slice(o*n,(o+1)*n),h=t=>{t>=0&&t<c&&p({...l,currentPage:t})},v=["Ration Card","Voter Id","Aadhar Card","Pan Card","College Application","License and RTO Services","Money Transfer Services","Counselling Apply","TN Police","TNEB","Online Payments","Dharisanam Bookings","Typing Services","MSME","UDAY Scheme","Income Certificate","Community Certificate","Nativity Certificate","Intercaste Marriage Certificate","Obc Certificate","No Male Child Certificate","First Graduate Certificate","Small/Marginal Farmer Certificate","Widow Certificate","Deserted Women Certificate","Disability Pension Scheme","Widow Pension Scheme","Deserted Women Pension Scheme","Unmarried Women Pension Scheme","Old Age Pension Scheme","TN Employment Registration","Government Job Application","Passport","Flight Ticket","Visa","Certificate Attestation","Bus Booking","Visa Stamping","Cruise Booking","Hotel Booking","Medical Appointment","Tour Services","Outline"],w=[{title:"Service Unit Report",dataIndex:"Service Unit Report ",key:"Service Unit Report ",fixed:"left",render:t=>v.includes(t)?t:""},...Object.keys(r[0]||{}).filter(t=>t!=="Service Unit Report ").map(t=>({title:t.trim(),dataIndex:t.trim(),key:t.trim()}))],j=async()=>{const t="https://script.google.com/macros/s/AKfycbwVmiCzufwMcN5br40vFfDw4vPf3MDlH1H4WP1oncY2oACrSF6HfwYjgO_RfJxhP9BIKw/exec";try{const f=await S.get(t),{url:b}=f.data;window.open(b,"_blank")}catch(f){console.error("Error exporting file:",f)}};return e.jsx("div",{className:"orders-table",children:e.jsxs("div",{className:"flex flex-col flex-1 gap-6 py-4 px-5 xs:px-6",children:[e.jsxs("div",{className:"flex flex-col gap-4 md:flex-row",children:[e.jsx(k,{wrapperClass:"flex-1",value:m,onChange:x,placeholder:"Search for Service..."}),e.jsxs("button",{className:"btn btn--base h-[50px] px-5 gap-2",onClick:j,children:[e.jsx("i",{className:"icon-arrow-down-to-line-regular text-[16px]"}),"Export"]})]}),e.jsx(D,{columns:w,dataSource:g,rowKey:"Service Unit Report ",pagination:!1,scroll:{x:"max-content"}}),s<768?e.jsx(y,{currentPage:o,totalItems:a,itemsPerPage:n,onPageChange:h}):e.jsx(y,{currentPage:o,totalItems:a,itemsPerPage:n,onPageChange:h})]})})},me=()=>{const{width:s}=C(),[r,d]=i.useState([]),[l,p]=i.useState({currentPage:0,itemsPerPage:10}),[m,x]=i.useState("");i.useEffect(()=>{S.get("https://script.google.com/macros/s/AKfycbxAw10szQikp6eNEAdEJ2ht5oJ-u0tQZFAZPHbkCsfFo_IRo7aPfqqnPAwj1_h500b_YQ/exec").then(t=>{d(t.data)}).catch(t=>console.error("Error fetching data:",t))},[]);const{currentPage:o,itemsPerPage:n}=l,a=r.length,c=Math.ceil(a/n),g=r.filter(t=>t["Service Category Report"].toLowerCase().includes(m.toLowerCase())).slice(o*n,(o+1)*n),h=t=>{t>=0&&t<c&&p({...l,currentPage:t})},v=["Ration Card","Voter Id","Aadhar Card","Pan Card","College Application","License and RTO Services","Money Transfer Services","Counselling Apply","TN Police","TNEB","Online Payments","Dharisanam Bookings","Typing Services","MSME","UDAY Scheme","Income Certificate","Community Certificate","Nativity Certificate","Intercaste Marriage Certificate","Obc Certificate","No Male Child Certificate","First Graduate Certificate","Small/Marginal Farmer Certificate","Widow Certificate","Deserted Women Certificate","Disability Pension Scheme","Widow Pension Scheme","Deserted Women Pension Scheme","Unmarried Women Pension Scheme","Old Age Pension Scheme","TN Employment Registration","Government Job Application","Passport","Flight Ticket","Visa","Certificate Attestation","Bus Booking","Visa Stamping","Cruise Booking","Hotel Booking","Medical Appointment","Tour Services","Outline","General Services","E-Sevai","Job Application Support","Travel Agnecy","Pan Card","Money Transfer Services"],w=[{title:"Service Category Report",dataIndex:"Service Category Report",key:"Service Category Report",fixed:"left",render:t=>v.includes(t)?t:""},...Object.keys(r[0]||{}).filter(t=>t!=="Service Category Report").map(t=>({title:t.trim(),dataIndex:t.trim(),key:t.trim()}))],j=async()=>{const t="https://script.google.com/macros/s/AKfycbwVmiCzufwMcN5br40vFfDw4vPf3MDlH1H4WP1oncY2oACrSF6HfwYjgO_RfJxhP9BIKw/exec";try{const f=await S.get(t),{url:b}=f.data;window.open(b,"_blank")}catch(f){console.error("Error exporting file:",f)}};return e.jsx("div",{className:"orders-table",children:e.jsxs("div",{className:"flex flex-col flex-1 gap-6 py-4 px-5 xs:px-6",children:[e.jsxs("div",{className:"flex flex-col gap-4 md:flex-row",children:[e.jsx(k,{wrapperClass:"flex-1",value:m,onChange:x,placeholder:"Search for Service..."}),e.jsxs("button",{className:"btn btn--base h-[50px] px-5 gap-2",onClick:j,children:[e.jsx("i",{className:"icon-arrow-down-to-line-regular text-[16px]"}),"Export"]})]}),e.jsx(D,{columns:w,dataSource:g,rowKey:"Service Category Report",pagination:!1,scroll:{x:"max-content"}}),s<768?e.jsx(y,{currentPage:o,totalItems:a,itemsPerPage:n,onPageChange:h}):e.jsx(y,{currentPage:o,totalItems:a,itemsPerPage:n,onPageChange:h})]})})},xe=()=>{const{width:s}=C(),[r,d]=i.useState([]),[l,p]=i.useState({currentPage:0,itemsPerPage:10}),[m,x]=i.useState("");i.useEffect(()=>{S.get("https://script.google.com/macros/s/AKfycbzglLugDnXGI7e1ysuLSvGrtDwiDgw9bGAfKtge3aQZ6RyfqIvhIdnH48plCFRik_TX2A/exec").then(t=>{d(t.data)}).catch(t=>console.error("Error fetching data:",t))},[]);const{currentPage:o,itemsPerPage:n}=l,a=r.length,c=Math.ceil(a/n),g=r.filter(t=>t["Service Category Report"].toLowerCase().includes(m.toLowerCase())).slice(o*n,(o+1)*n),h=t=>{t>=0&&t<c&&p({...l,currentPage:t})},v=["Ration Card","Voter Id","Aadhar Card","Pan Card","College Application","License and RTO Services","Money Transfer Services","Counselling Apply","TN Police","TNEB","Online Payments","Dharisanam Bookings","Typing Services","MSME","UDAY Scheme","Income Certificate","Community Certificate","Nativity Certificate","Intercaste Marriage Certificate","Obc Certificate","No Male Child Certificate","First Graduate Certificate","Small/Marginal Farmer Certificate","Widow Certificate","Deserted Women Certificate","Disability Pension Scheme","Widow Pension Scheme","Deserted Women Pension Scheme","Unmarried Women Pension Scheme","Old Age Pension Scheme","TN Employment Registration","Government Job Application","Passport","Flight Ticket","Visa","Certificate Attestation","Bus Booking","Visa Stamping","Cruise Booking","Hotel Booking","Medical Appointment","Tour Services","Outline","General Services","E-Sevai","Job Application Support","Travel Agnecy","Pan Card","Money Transfer Services"],w=[{title:"Service Category Report",dataIndex:"Service Category Report",key:"Service Category Report",fixed:"left",render:t=>v.includes(t)?t:""},...Object.keys(r[0]||{}).filter(t=>t!=="Service Category Report").map(t=>({title:t.trim(),dataIndex:t.trim(),key:t.trim()}))],j=async()=>{const t="https://script.google.com/macros/s/AKfycbwVmiCzufwMcN5br40vFfDw4vPf3MDlH1H4WP1oncY2oACrSF6HfwYjgO_RfJxhP9BIKw/exec";try{const f=await S.get(t),{url:b}=f.data;window.open(b,"_blank")}catch(f){console.error("Error exporting file:",f)}};return e.jsx("div",{className:"orders-table",children:e.jsxs("div",{className:"flex flex-col flex-1 gap-6 py-4 px-5 xs:px-6",children:[e.jsxs("div",{className:"flex flex-col gap-4 md:flex-row",children:[e.jsx(k,{wrapperClass:"flex-1",value:m,onChange:x,placeholder:"Search for Service..."}),e.jsxs("button",{className:"btn btn--base h-[50px] px-5 gap-2",onClick:j,children:[e.jsx("i",{className:"icon-arrow-down-to-line-regular text-[16px]"}),"Export"]})]}),e.jsx(D,{columns:w,dataSource:g,rowKey:"Service Category Report",pagination:!1,scroll:{x:"max-content"}}),s<768?e.jsx(y,{currentPage:o,totalItems:a,itemsPerPage:n,onPageChange:h}):e.jsx(y,{currentPage:o,totalItems:a,itemsPerPage:n,onPageChange:h})]})})},fe={statistics:e.jsx(te,{}),sales_analytics:e.jsx(se,{}),sales_by_category:e.jsx(ie,{}),top_selling:e.jsx(ce,{}),trending_product:e.jsx(de,{})},qe=()=>{const[s,r]=i.useState(!1);i.useEffect(()=>{localStorage.getItem("isAuthenticated")==="true"&&r(!0)},[]);const d=()=>{r(!1),localStorage.removeItem("isAuthenticated")};return s?e.jsxs(e.Fragment,{children:[e.jsx(M,{title:"AIMS Sales Dashboard",onLogout:d}),e.jsx(O,{id:"dashboard_a",widgets:fe,cols:{xl:4,lg:3,md:2}}),e.jsxs("div",{className:"layout-wrapper flex flex-col flex-1 gap-6 md:gap-8",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-6 md:gap-8 3xl:grid-cols-2",children:[e.jsx(Q,{}),e.jsx($,{})]}),e.jsx("h2",{children:"Performance Review"}),e.jsx(X,{}),e.jsx(me,{}),e.jsx("h2",{children:"Sales Review"}),e.jsx(pe,{}),e.jsx(xe,{})]})]}):e.jsx(ee,{setIsAuthenticated:r})};export{qe as default};
